webpackJsonp([1],{0:function(t,e){},"7zck":function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("7+uW"),s={name:"App",data:function(){return{email:"",drawer:null,menu:[{title:"home",icon:"home",link:"/",log:null},{title:"Chats",icon:"chat",link:"/chats",log:null},{title:"Login",icon:"home",link:"/login",log:null},{title:"SingUp",icon:"home",link:"/signup",log:null},{title:"Logout",icon:"home",link:"/log",log:null}],items:[{title:"Home",icon:"dashboard"},{title:"About",icon:"question_answer"}]}},methods:{test:function(){localStorage.user=null,this.$router.go({path:this.$route.path}),this.$router.push("/login")},go:function(t){"/log"===t?this.test():this.$router.push(t)}},computed:{loggedin:function(){return!!localStorage.user&&null!==JSON.parse(localStorage.user)}},created:function(){if(localStorage.user){var t=JSON.parse(localStorage.user);null!==t&&(console.log(t),this.email=t.email)}this.loggedin?this.menu.forEach(function(t){"Login"==t.title||"SingUp"==t.title?t.log=!1:t.log=!0}):this.menu.forEach(function(t){"Login"==t.title||"SingUp"==t.title?t.log=!0:t.log=!1})}},a={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("div",{attrs:{id:"app"}},[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-toolbar-side-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),r("v-toolbar-title",{staticStyle:{"margin-right":"26px"}},[t._v("Real-Time Chat App")]),t._v(" "),r("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t.loggedin?r("v-btn",{attrs:{flat:"",to:"/"}},[t._v("Home")]):t._e(),t._v(" "),t.loggedin?r("v-btn",{attrs:{flat:"",to:"/chats"}},[t._v("Chats")]):t._e()],1),t._v(" "),r("v-spacer"),t._v(" "),t.loggedin?r("h4",{staticClass:"mr-4"},[t._v(t._s(t.email))]):t._e(),t._v(" "),r("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t.loggedin?t._e():r("v-btn",{attrs:{flat:"",to:"/login"}},[t._v("Login")]),t._v(" "),t.loggedin?t._e():r("v-btn",{attrs:{flat:"",to:"/signup"}},[t._v("Signup")]),t._v(" "),t.loggedin?r("v-btn",{attrs:{flat:""},on:{click:t.test}},[t._v("Logout")]):t._e()],1)],1),t._v(" "),r("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",{staticClass:"pt-0",attrs:{dense:""}},[r("v-divider"),t._v(" "),t._l(t.menu,function(e){return e.log?r("v-list-tile",{key:e.title,on:{click:function(r){t.go(e.link)}}},[r("v-list-tile-action",[r("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),r("v-list-tile-content",[r("v-list-tile-title",[t._v(t._s(e.title))])],1)],1):t._e()})],2)],1),t._v(" "),r("div",{staticClass:"container"},[r("router-view")],1)],1)])},staticRenderFns:[]},o=r("VU/8")(s,a,!1,null,null,null).exports,i=r("/ocq"),l=(r("jIVf"),r("Xxa5")),c=r.n(l),u=r("mvHQ"),d=r.n(u),v=r("exGp"),p=r.n(v),h="https://almadihapi-chat-api.glitch.me/",m={signup:function(){var t=p()(c.a.mark(function t(e){var r,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(h+"signup",{method:"post",headers:new Headers({"Content-type":"application/json"}),body:d()(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),login:function(){var t=p()(c.a.mark(function t(e){var r,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(h+"login",{method:"post",headers:new Headers({"Content-type":"application/json"}),body:d()(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getChat:function(){var t=p()(c.a.mark(function t(e){var r,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(h+"msgs/"+e.from+"/"+e.to);case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),sendMsg:function(){var t=p()(c.a.mark(function t(e){var r,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(h+"msg/"+e.to,{method:"post",headers:new Headers({"Content-type":"application/json"}),body:d()(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getUsers:function(){var t=p()(c.a.mark(function t(){var e,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(h+"users");case 2:return e=t.sent,t.next=5,e.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getUser:function(){var t=p()(c.a.mark(function t(e){var r,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(h+"user/"+e);case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n[0].name);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getChats:function(){var t=p()(c.a.mark(function t(e){var r,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(h+"chats/"+e);case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},f=r("DmT9"),g=new(r.n(f).a)("https://almadihapi-chat-api.glitch.me"),_={name:"App",data:function(){return{today:new Date,id:"",text:"",msgs:[],name:"",sound:"https://almadihapi-chat-api.glitch.me/sound",sent:null}},created:function(){var t=this;this.id=JSON.parse(localStorage.user).id.toString(),this.fetch(),m.getUser(this.$route.params.to).then(function(e){return t.name=e}),this.sc(),g.on("msg",function(e){t.sent||e.to_id!=t.id||e.from_id!=t.$route.params.to?t.sent&&e.to_id==t.$route.params.to&&e.from_id==t.id&&(t.sent=null,t.msgs.push(e),console.log(e),t.sc()):(t.msgs.push(e),t.playSound(t.sound),window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight))})},methods:{sc:function(){window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight)},playSound:function(t){t&&new Audio(t).play()},isMine:function(t){return t==this.id},fetch:function(){var t=this,e={from:this.id,to:this.$route.params.to};m.getChat(e).then(function(e){return t.msgs=e})},send:function(){var t=this,e={id:this.id,to:this.$route.params.to,text:this.text};this.sent=!0,m.sendMsg(e).then(function(){t.text="",g.emit("hello",e)}).catch(function(t){return console.log(t)})},scro:function(){elemnt.scrollIntoView(!1)}},computed:{ms:function(){return""==this.text}}},x={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{sm2:"",xs3:"",md2:""}},[r("v-btn",{attrs:{icon:"",to:"/"}},[r("v-icon",{attrs:{large:""}},[t._v("arrow_back")])],1)],1),t._v(" "),r("v-flex",{attrs:{sm6:"",xs12:"",md4:""}},[r("h1",[t._v(t._s(t.name))])])],1)],1),t._v(" "),r("v-layout",{staticClass:"pb-4 scroll-y",attrs:{column:"","mb-5":"","mt-4":"",id:"hi"}},t._l(t.msgs,function(e){return r("v-flex",{key:e.id,style:{"align-self":t.isMine(e.from_id)?"flex-end":"flex-start"}},[t.isMine(e.from_id)?r("v-card",{staticClass:"white--text",staticStyle:{"margin-bottom":"3px","border-radius":"30px"},attrs:{color:"primary",flat:""}},[r("v-card-title",{staticClass:"text-xs-right"},[r("div",[r("div",[t._v(t._s(e.text))])])])],1):r("v-card",{staticStyle:{"border-radius":"30px"},attrs:{color:"grey lighten-2",flat:"",style:"border-radius:30px"}},[r("v-card-title",[r("div",[r("div",[t._v(t._s(e.text))]),t._v(" "),r("div",{staticClass:"grey--text"})])])],1)],1)})),t._v(" "),r("div",{staticClass:"hi",attrs:{id:"container"}}),t._v(" "),r("div",[r("v-layout",{attrs:{row:""}},[r("div",{staticClass:"fix xs11"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.send(e)}}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{sm11:"",xs10:""}},[r("v-text-field",{attrs:{label:"Message",autofocus:""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),r("v-flex",{attrs:{sm1:"",xs1:""}},[r("v-btn",{attrs:{type:"submit",icon:"",color:"primary",large:"",disabled:t.ms}},[r("v-icon",{attrs:{size:"xlarge"}},[t._v("send")])],1)],1)],1)],1)])])],1)],1)},staticRenderFns:[]};var w=r("VU/8")(_,x,!1,function(t){r("gcEu")},null,null).exports,b={data:function(){return{email:"",password:"",error:!1,errormsg:""}},methods:{login:function(){var t=this,e={email:this.email,password:this.password};m.login(e).then(function(e){e.error?(t.error=!0,t.errormsg=e.errormsg):(localStorage.user=d()(e.user[0]),t.error=!1,t.$router.go({path:t.$route.path}),t.$router.push("/"))})}},created:function(){console.log(this.$route.path+"/login")}},y={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm7:"","offset-sm2":""}},[r("h1",[t._v("Login")]),t._v(" "),r("v-card",[r("v-card-text",[r("v-container",[r("v-alert",{attrs:{value:t.error,type:"error"}},[t._v("\r\n          "+t._s(t.errormsg)+"\r\n             ")]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Email",required:"",autofocus:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{color:"primary",type:"submit"}},[t._v("Login")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},S=r("VU/8")(b,y,!1,null,null,null).exports,k={data:function(){return{email:"",password:"",cpassword:"",name:"",error:!1,errormsg:"",done:!1}},computed:{pas:function(){return this.password!==this.cpassword?"Password doesn't match":""},valid:function(){return this.pass&&""!==this.email&&this.emp},pass:function(){return this.password==this.cpassword},emp:function(){return""!==this.password&&""!==this.cpassword}},methods:{singup:function(){var t=this,e={email:this.email,pass:this.password,name:this.name};m.signup(e).then(function(e){e.error?(t.errormsg=e.errormsg,t.error=!0):(t.done=!0,setTimeout(function(){t.$router.push("/login")},2400))})}}},C={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("h1",[t._v("SignUP")]),t._v(" "),r("v-card",[r("v-card-text",[r("v-container",[r("v-alert",{attrs:{value:t.error,type:"error"}},[t._v("\r\n          "+t._s(t.errormsg)+"\r\n             ")]),t._v(" "),r("v-alert",{attrs:{value:t.done,type:"success"}},[t._v("\r\n      Success! you will be redirected to login page\r\n    ")]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.singup(e)}}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Email",required:"",autofocus:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Full Name",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Confirm Password",type:"password",rules:[t.pas],required:""},model:{value:t.cpassword,callback:function(e){t.cpassword=e},expression:"cpassword"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{color:"primary",type:"submit",disabled:!t.valid}},[t._v("signup")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},E=r("VU/8")(k,C,!1,null,null,null).exports,$={data:function(){return{users:[],id:""}},created:function(){var t=this;this.id=JSON.parse(localStorage.user).id.toString(),m.getUsers().then(function(e){e.forEach(function(e){e.id!=t.id&&t.users.push(e)})})}},U={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticStyle:{"min-height":"0"},attrs:{fluid:"","grid-list-lg":""}},[r("h2",[t._v("Users List")]),t._v(" "),r("v-card",[r("v-card-text",[r("v-container",[r("v-list",t._l(t.users,function(e){return r("v-list-tile",{key:e.id},[r("v-list-tile-content",[r("v-list-tile-title",[t._v("\n            "+t._s(e.name)+"\n                 \n            ")])],1),t._v(" "),r("v-list-tile-action",[r("v-btn",{attrs:{icon:"",to:{name:"chat",params:{to:e.id}},color:"primary"}},[r("v-icon",[t._v("chat_bubble")])],1)],1)],1)}))],1)],1)],1)],1)},staticRenderFns:[]},j=r("VU/8")($,U,!1,null,null,null).exports,H={data:function(){return{chats:[],id:""}},created:function(){var t=this;this.id=JSON.parse(localStorage.user).id.toString(),m.getChats(this.id).then(function(e){e.forEach(function(e){e.to_id!=t.id&&t.chats.push(e)})})}},N={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticStyle:{"min-height":"0"},attrs:{fluid:"","grid-list-lg":""}},[r("h2",[t._v("Chats")]),t._v(" "),r("v-card",[r("v-card-text",[0==t.chats.length?r("p",[t._v("No chats go to home page and send some messages")]):t._e(),t._v(" "),r("v-container",[r("v-list",t._l(t.chats,function(e){return r("v-list-tile",{key:e.to_id},[t.id!=e.to_id?r("v-list-tile-content",[r("v-list-tile-title",[t._v("\n            "+t._s(e.name)+"\n            ")])],1):t._e(),t._v(" "),t.id!=e.to_id?r("v-list-tile-action",[r("v-btn",{attrs:{icon:"",to:{name:"chat",params:{to:e.to_id}},color:"primary"}},[r("v-icon",[t._v("message")])],1)],1):t._e()],1)}))],1)],1)],1)],1)},staticRenderFns:[]},J=r("VU/8")(H,N,!1,null,null,null).exports,L=function(t,e,r){localStorage.user?null!==JSON.parse(localStorage.user)?r():r("/login"):r("/login")},V=function(t,e,r){localStorage.user?null!==JSON.parse(localStorage.user)?r("/"):r():r()};n.a.use(i.a);var q=new i.a({routes:[{path:"/chat/:to",name:"chat",component:w,beforeEnter:L},{path:"/login",name:"login",component:S,beforeEnter:V},{path:"/signup",name:"signup",component:E,beforeEnter:V},{path:"/",name:"home",component:j,beforeEnter:L},{path:"/chats",name:"chats",component:J,beforeEnter:L}]}),O=r("3EgV"),A=r.n(O),D=(r("7zck"),r("gJtD"),r("bNL2")),F=r.n(D);n.a.use(A.a),n.a.use(F.a),n.a.config.productionTip=!0,new n.a({el:"#app",router:q,components:{App:o},template:"<App/>"})},gJtD:function(t,e){},gcEu:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1546b6ec7bcf42e66c6a.js.map